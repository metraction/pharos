alerting:
  route:
    group_by: ["..."]
    continue: true
    receiver: default
    child_routes:
      - receiver: example_webhook
        group_by: 
          - imageid
          - imagespec
          - namespace
        continue: true
        matchers:
          - namespace ="pharos"
      - receiver: default
        group_by: 
          - imageid
          - namespace
        matchers:
          - namespace != pharos
        continue: true
      - receiver: default
        group_by:
          - imageid
          - platform
          - namespace
        matchers:
          - imageid =~ ".*"
          - imagespec =~ ".*"
          - namespace =~ "nextcloud-.*"
        continue: true
      - receiver: default
        group_by: 
          - platform
        matchers:
          - imageid =~ ".*"
          - imagespec =~ ".*"
          - namespace !~ "nextcloud-.*"
        continue: true
        child_routes:
          - receiver: test
            group_wait: 1m

  receivers:
    - name: test
    - name: "default"
    - name: "example_webhook"
      webhook_configs:
        - url: "http://localhost:8081/api/v1/alerts"
          send_resolved: true
          http_config:
            authorization:
              type: "Bearer"
              credentials: "test-token"
